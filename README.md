# 剪纸图案AI生成与自动绘制系统

本项目是一个集"AI 剪纸图案生成"、"图像分析步骤自动化"与"Arduino 机械臂自动绘制"为一体的智能系统。

---

## 主要功能

- **AI 剪纸图案生成**：输入描述词，系统自动生成传统风格的剪纸图案。
- **图像分析与步骤生成**：上传图片，自动分析并生成详细的绘制步骤。
- **Arduino 自动绘制**：一键将步骤发送至 Arduino 机械臂，自动完成物理绘制。

---

## 快速开始

1. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

2. **配置环境变量**
   - 设置 `STABLE_DIFFUSION_API_KEY` 以启用 AI 生成功能 (https://platform.stability.ai/account/keys) 。
   - 配置 Arduino 端口（如 `ARDUINO_SERIAL_PORT`）。

3. **运行系统**
   ```bash
   python app/main.py
   ```
   访问 `http://localhost:5000` 打开网页界面。

---

## 使用说明

- **AI 剪纸生成**：在首页输入描述词，点击生成即可获得剪纸风格图案。
- **图像分析**：上传图片，系统自动分析并生成绘制步骤。
- **自动绘制**：连接 Arduino 后，一键发送步骤至机械臂自动绘制。

---

## 依赖环境

- Python 3.8+
- 主要依赖：flask、requests、python-dotenv、pyserial、pillow、numpy、opencv-python、svgwrite

---

## 联系与支持

如有问题或建议，请联系维护者：[Aashaby](mailto:1094359168@qq.com)

---

## 功能与界面元素详细说明

### 1. AI 剪纸图案生成
- **功能**：输入中文描述词，系统会调用 AI（Stable Diffusion）自动生成传统风格的剪纸图案图片。
- **用途**：为用户提供灵感或直接用于后续物理绘制。

### 2. 图像分析与步骤生成
- **功能**：上传任意图片，系统会自动分析图像轮廓，分解为可执行的绘制步骤。
- **步骤说明**：
  - 系统会自动检测图像中的所有封闭轮廓（如花瓣、动物等外形）。
  - 每个轮廓会被分解为若干"笔画"或"绘制段"，每段都带有方向、长度、类型（直线/曲线）等描述。
  - 步骤以列表形式展示，便于用户理解和操作。

### 3. 可视化界面说明
- **图像上的圆点**：
  - **绿色圆点**：表示每个轮廓的"起点"，即该部分绘制的起始位置。
  - **红色圆点**：表示每个轮廓的"终点"，即该部分绘制的结束位置。
- **彩色线条**：
  - 不同颜色代表不同的轮廓或绘制路径，便于区分。
  - 线条宽度较粗，突出显示主路径。
- **箭头/方向**：
  - 步骤描述中会标明"向右""向下"等方向，帮助用户理解每一步的实际运动方向。
- **SVG 预览**：
  - 系统会生成 SVG 矢量图，便于后续导出或用于硬件绘制。

### 4. Arduino 自动绘制
- **功能**：将分析得到的步骤一键发送至 Arduino 机械臂，自动完成物理绘制。
- **支持**：自动转换为 G-code 指令，兼容常见 XY 绘图机械臂。

---

## 典型操作流程

1. **AI 生成**：输入描述词 → 生成剪纸图案 → 可下载/分析。
2. **图像分析**：上传图片 → 系统自动分解步骤 → 可视化显示每一步。
3. **自动绘制**：连接 Arduino → 一键发送步骤 → 机械臂自动绘制。

---

## 图例说明

- 绿色圆点：起点
- 红色圆点：终点
- 彩色线条：路径/轮廓
- 步骤描述示例："沿向右绘制一条长直线"——表示从起点沿右侧方向绘制一段较长的直线。 